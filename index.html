<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Promise Day for Kiki</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  height: 100vh;
}

/* Title */
h1 {
  position: absolute;
  top: 20px;
  width: 100%;
  text-align: center;
  color: white;
}

/* Floating hearts */
.heart {
  position: absolute;
  bottom: -50px;
  width: 40px;
  height: 40px;
  background: red;
  transform: rotate(45deg);
  animation: floatUp linear infinite;
  cursor: pointer;
}

.heart::before,
.heart::after {
  content: "";
  position: absolute;
  width: 40px;
  height: 40px;
  background: inherit;
  border-radius: 50%;
}

.heart::before { top: -20px; left: 0; }
.heart::after { left: -20px; top: 0; }

@keyframes floatUp {
  from { transform: translateY(0) rotate(45deg); }
  to { transform: translateY(-120vh) rotate(45deg); }
}

/* Popup */
.popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0);
  background: white;
  padding: 25px;
  border-radius: 20px;
  text-align: center;
  width: 85%;
  max-width: 340px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  transition: 0.4s;
}

.popup.show {
  transform: translate(-50%, -50%) scale(1);
}

button {
  margin-top: 15px;
  padding: 8px 15px;
  border: none;
  background: #ff6b81;
  color: white;
  border-radius: 10px;
  cursor: pointer;
}

/* Big heart */
.bigHeart {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 120px;
  height: 120px;
  background: #ff4d6d;
  transform: translate(-50%, -50%) rotate(45deg) scale(0);
  opacity: 0;
  cursor: pointer;
  transition: 0.8s;
}

.bigHeart::before,
.bigHeart::after {
  content: "";
  position: absolute;
  width: 120px;
  height: 120px;
  background: inherit;
  border-radius: 50%;
}

.bigHeart::before { top: -60px; left: 0; }
.bigHeart::after { left: -60px; top: 0; }

.bigHeart.show {
  transform: translate(-50%, -50%) rotate(45deg) scale(1);
  opacity: 1;
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  0% { transform: translate(-50%, -50%) rotate(45deg) scale(1); }
  50% { transform: translate(-50%, -50%) rotate(45deg) scale(1.1); }
  100% { transform: translate(-50%, -50%) rotate(45deg) scale(1); }
}

/* Explosion hearts */
.explosion {
  position: absolute;
  width: 15px;
  height: 15px;
  background: red;
  transform: rotate(45deg);
  animation: explode 1s forwards;
}

@keyframes explode {
  to {
    transform: translate(var(--x), var(--y)) rotate(45deg);
    opacity: 0;
  }
}

.finalMessage {
  font-size: 18px;
  line-height: 1.6;
}

.finalMessage img {
  width: 100%;
  border-radius: 12px;
  margin-bottom: 15px;
}
</style>
</head>

<body>

<h1>Happy Promise Day, Kiki ❤️</h1>

<audio autoplay loop>
  <source src="promise.aac" type="audio/aac">
</audio>

<!-- Promise popup -->
<div class="popup" id="popup">
  <p id="popupText"></p>
  <button onclick="closePopup()">Close</button>
</div>

<!-- Final message -->
<div class="popup" id="finalPopup">
  <div class="finalMessage">
    <img src="A_digital_screenshot_features_a_Promise_Day_webpag.png" alt="Promise Hands">
    <p id="typedText"></p>
  </div>
</div>

<div class="bigHeart" id="bigHeart" onclick="explodeHeart()"></div>

<script>
const promises = [
  "I promise to stand by you in every situation.",
  "I promise to make you smile even on your hardest days.",
  "I promise to respect your dreams and support them.",
  "I promise to listen and understand your feelings.",
  "I promise to be honest and loyal to you.",
  "I promise to love you more every single day."
];

let opened = 0;

function createHeart() {
  if (opened >= promises.length) return;

  const heart = document.createElement("div");
  heart.classList.add("heart");

  const colors = ["#ff4d6d", "#ff6b81", "#ff85a1"];
  heart.style.background = colors[Math.floor(Math.random() * colors.length)];
  heart.style.left = Math.random() * 90 + "vw";
  heart.style.animationDuration = (10 + Math.random() * 4) + "s"; // slower

  heart.onclick = () => {
    document.getElementById("popupText").innerText = promises[opened];
    document.getElementById("popup").classList.add("show");
    heart.remove();
    opened++;

    if (opened >= promises.length) {
      setTimeout(() => {
        document.getElementById("bigHeart").classList.add("show");
      }, 800);
    }
  };

  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 15000);
}

function closePopup() {
  document.getElementById("popup").classList.remove("show");
}

function explodeHeart() {
  const bigHeart = document.getElementById("bigHeart");
  const rect = bigHeart.getBoundingClientRect();

  for (let i = 0; i < 20; i++) {
    const e = document.createElement("div");
    e.classList.add("explosion");
    e.style.left = rect.left + rect.width/2 + "px";
    e.style.top = rect.top + rect.height/2 + "px";
    e.style.setProperty("--x", (Math.random()*300-150)+"px");
    e.style.setProperty("--y", (Math.random()*300-150)+"px");
    document.body.appendChild(e);
    setTimeout(() => e.remove(), 1000);
  }

  bigHeart.style.display = "none";
  showFinalMessage();
}

function showFinalMessage() {
  document.getElementById("finalPopup").classList.add("show");
  typeMessage();
}

function typeMessage() {
  const text = `Kiki,

Every promise I made today
comes straight from my heart.

I don’t promise a perfect life…
but I promise to love you,
respect you,
and stay beside you
through every moment. ❤️`;

  let i = 0;
  const speed = 40;
  const target = document.getElementById("typedText");

  function type() {
    if (i < text.length) {
      target.innerHTML += text.charAt(i);
      i++;
      setTimeout(type, speed);
    }
  }
  type();
}

setInterval(createHeart, 1200);
</script>

</body>
</html>
